!function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";o.r(e);class n{constructor(t,e,o,n,i,r,a){this.codigo=t,this.nome=e,this.sexo=o,this.idade=n,this.cidade=i,this.estado=r,this.salario=a}}class i{constructor(){this.funcionarios=[]}adiciona(t){this.funcionarios.push(t)}paraArray(){return[].concat(this.funcionarios)}}class r{constructor(){this._urlBase="http://localhost:8080/funcionario-service/"}async gravaFuncionario(t,e){try{return await fetch(this._urlBase.concat("grava"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>t(e)).then(()=>!0)}catch(t){throw new Error(`Erro ao obter serviço: ${t.message}`)}}async buscaFuncionarios(t,e){try{return await fetch(this._urlBase.concat(`get/${e}`)).then(e=>t(e)).then(t=>t.json())}catch(t){throw new Error(`Erro ao obter serviço: ${t.message}`)}}async listaFuncionarios(t){try{return await fetch(this._urlBase.concat("lista")).then(e=>t(e)).then(t=>t.json())}catch(t){throw new Error(`Erro ao obter serviço: ${t.message}`)}}async removeFuncionario(t,e){try{return await fetch(this._urlBase.concat(`remove/${e}`),{method:"DELETE"}).then(e=>t(e)).then(()=>!0)}catch(t){throw new Error(`Erro ao obter serviço: ${t.message}`)}}}function a(t){return function(e,o){let n;Object.defineProperty(e,o,{get:function(){return n||(console.log(`buscando ${t} para injetar em ${o}`),n=$(t)),n}})}}function s(t=300){return function(e,o,n){const i=n.value;let r=0;return n.value=function(...e){event&&event.preventDefault(),clearInterval(r),r=setTimeout(()=>i.apply(this,e),t)},n}}class c{constructor(t,e=!0){this._elemento=$(t),this._escapar=e}update(t){let e=this.template(t);this._escapar&&(e=e.replace(/<script>[\s\S]*?<\/script>/g,"")),this._elemento.html(e)}getElemento(){return this._elemento}}class l extends c{template(t){return`<p class="alert alert-info">${t}</p>`}mostra(t){this.getElemento().fadeIn(),this.update(t),this.getElemento().fadeOut(3e3)}}class u extends c{template(t){return`\n        <table class="table table-sm table-hover small">\n            <thead class="thead-light">\n                <tr>\n                    <th class="text-center">#</th>\n                    <th>NOME</th>\n                    <th>CIDADE</th>\n                    <th>UF</th>\n                    <th>SALÁRIO</th>\n                    <th class="text-center">EDITAR</th>\n                    <th class="text-center">EXCLUIR</th>\n                </tr>\n            </thead>\n            <tbody>\n                ${t.paraArray().map(t=>`\n                        <tr>\n                            <th class="text-center">${t.codigo.toString().padStart(4,"0")}</th>\n                            <td class="text-capitalize">${t.nome}</td>\n                            <td class="text-uppercase">${t.cidade}</td>\n                            <td class="text-uppercase">${t.estado}</td>\n                            <td>${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.salario)}</td>\n                            <td class="text-center">\n                                <img class="edita" value="${t.codigo}" src="res/img/update.png" alt="Alterar" width="20" height="20"/>\n                            </td>\n                            <td class="text-center">\n                                <img class="deleta" value="${t.codigo}" src="res/img/delete.png" alt="Alterar" width="20" height="20"/>\n                            </td>\n                        </tr>\n                    `).join("")}\n            </tbody>\n            <tfoot>\n            </tfoot>\n        </table>\n    `}}var h=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};class p{constructor(){this._funcionarios=new i,this._funcionariosView=new u("#funcionariosView"),this._mensagemView=new l("#mensagemView"),this._service=new r,this._isOK=(t=>{if(t.ok)return t;throw new Error(t.statusText)}),this.lista()}limpaForm(){this._form.each((t,e)=>e.reset()),this.goTop()}goTop(){scrollTo(0,0),this._inputNome.focus()}busca(t){this._service.buscaFuncionarios(this._isOK,t).then(t=>{this._inputCodigo.val(t.codigo),this._inputNome.val(t.nome),this._inputSexo.val(t.sexo),this._inputIdade.val(t.idade),this._inputCidade.val(t.cidade),this._inputEstado.val(t.estado),this._inputSalario.val(t.salario),this.goTop()})}grava(){const t=new n(parseInt(this._inputCodigo.val()),this._inputNome.val(),this._inputSexo.val(),parseInt(this._inputIdade.val()),this._inputCidade.val(),this._inputEstado.val(),parseFloat(this._inputSalario.val()));this._service.gravaFuncionario(this._isOK,t).then(t=>{1==t&&(this.lista(),this._mensagemView.mostra("Funcionario gravado!"),this.limpaForm())})}remove(t){confirm("Deseja realmente excluir esse funcinário?")&&this._service.removeFuncionario(this._isOK,t).then(t=>{1==t&&(this.lista(),this._mensagemView.mostra("Funcionario excluido!"),this.goTop())})}lista(){this._service.listaFuncionarios(this._isOK).then(t=>{this._funcionarios=new i,t.forEach(t=>this._funcionarios.adiciona(t)),this._funcionariosView.update(this._funcionarios),$(".edita").click(t=>{const e=t.target;this.busca(parseInt(e.getAttribute("value")))}),$(".deleta").click(t=>{const e=t.target;this.remove(parseInt(e.getAttribute("value")))})})}}h([a(".form")],p.prototype,"_form",void 0),h([a("#codigo")],p.prototype,"_inputCodigo",void 0),h([a("#nome")],p.prototype,"_inputNome",void 0),h([a("#sexo")],p.prototype,"_inputSexo",void 0),h([a("#idade")],p.prototype,"_inputIdade",void 0),h([a("#cidade")],p.prototype,"_inputCidade",void 0),h([a("#estado")],p.prototype,"_inputEstado",void 0),h([a("#salario")],p.prototype,"_inputSalario",void 0),h([s()],p.prototype,"busca",null),h([s()],p.prototype,"grava",null),h([s()],p.prototype,"remove",null),h([s()],p.prototype,"lista",null);const d=new p;$(".form").submit(d.grava.bind(d)),$("#botao-limpa").click(d.limpaForm.bind(d))}]);